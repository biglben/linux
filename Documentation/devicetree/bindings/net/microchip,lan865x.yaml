# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/net/microchip,lan865x.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Microchip LAN8650/1 10BASE-T1S MACPHY Ethernet Controllers

maintainers:
  - Parthiban Veerasooran <parthiban.veerasooran@microchip.com>

description:
  The LAN8650/1 combines a Media Access Controller (MAC) and an Ethernet
  PHY to enable 10BASEâ€‘T1S networks. The Ethernet Media Access Controller
  (MAC) module implements a 10 Mbps half duplex Ethernet MAC, compatible
  with the IEEE 802.3 standard and a 10BASE-T1S physical layer transceiver
  integrated into the LAN8650/1. The communication between the Host and
  the MAC-PHY is specified in the OPEN Alliance 10BASE-T1x MACPHY Serial
  Interface (TC6).

  Specifications about the LAN8650/1 can be found at:
    https://www.microchip.com/en-us/product/lan8650

allOf:
  - $ref: ethernet-controller.yaml#

properties:
  compatible:
    const: microchip,lan865x

  reg:
    maxItems: 1

  interrupts:
    description:
      Interrupt from MAC-PHY asserted in the event of Receive Chunks
      Available, Transmit Chunk Credits Available and Extended Status
      Event.
    maxItems: 1

  local-mac-address:
    description:
      Specifies the MAC address assigned to the network device.
    $ref: /schemas/types.yaml#/definitions/uint8-array
    minItems: 6
    maxItems: 6

  spi-max-frequency:
    minimum: 15000000
    maximum: 25000000

  oa-tc6:
    $ref: oa-tc6.yaml#
    unevaluatedProperties: true

  "#address-cells":
    const: 1

  "#size-cells":
    const: 0

required:
  - compatible
  - reg
  - pinctrl-names
  - pinctrl-0
  - interrupts
  - interrupt-parent
  - local-mac-address
  - spi-max-frequency
  - oa-tc6

additionalProperties: false

examples:
  - |
    spi {
      #address-cells = <1>;
      #size-cells = <0>;

      ethernet@0 {
        compatible = "microchip,lan865x";
        reg = <0>;
        pinctrl-names = "default";
        pinctrl-0 = <&eth0_pins>;
        interrupt-parent = <&gpio>;
        interrupts = <6 IRQ_TYPE_EDGE_FALLING>;
        local-mac-address = [04 05 06 01 02 03];
        spi-max-frequency = <15000000>;
        status = "okay";
        oa-tc6 {
          #address-cells = <1>;
          #size-cells = <0>;
          oa-cps = <64>;
          oa-txcte;
	  oa_rxcte;
	  oa-prote;
	  oa-dprac;
        };
      };
    };
